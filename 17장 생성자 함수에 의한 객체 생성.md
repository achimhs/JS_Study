# [22/08/16] 17ì¥ ìƒì„±ì í•¨ìˆ˜ì— ì˜í•œ ê°ì²´ ìƒì„±

## 1. Object ìƒì„±ì í•¨ìˆ˜

new ì—°ì‚°ìì™€ í•¨ê»˜ Object ìƒì„±ì í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ë©´ `ë¹ˆ ê°ì²´`ë¥¼ ë°˜í™˜í•œë‹¤.
ë¹ˆ ê°ì²´ë¥¼ ìƒì„±í•œ ì´í›„ `í”„ë¡œí¼í‹°` ë˜ëŠ” `ë©”ì„œë“œ`ë¥¼ ì¶”ê°€í•˜ì—¬ ê°ì²´ë¥¼ ì™„ì„±í•  ìˆ˜ ìˆë‹¤.

```javascript
// ë¹ˆ ê°ì²´ì˜ ìƒì„±
const person = new Object();

// í”„ë¡œí¼í‹° ì¶”ê°€
person.name = "Lee";
person.sayHello = function () {
  console.log("Hi! My name is " + this.name);
};

console.log(person); // {name: "Lee", sayHello: Æ’}
person.sayHello(); // Hi! My name is Lee
```

> ğŸ’¡ìƒì„±ì í•¨ìˆ˜: new ì—°ì‚°ìì™€ í•¨ê»˜ í˜¸ì¶œí•˜ì—¬ ê°ì²´ë¥¼ ìƒì„±í•˜ëŠ” í•¨ìˆ˜(Object ìƒì„±ì í•¨ìˆ˜ ì™¸ì—ë„ String, Number, Boolean, Function, Array, Date, RegExp, Promiseë“±ì˜ ë¹ŒíŠ¸ì¸ ìƒì„±ì í•¨ìˆ˜ë¥¼ ì œê³µí•œë‹¤.)
> ğŸ’¡ì¸ìŠ¤í„´ìŠ¤: ìƒì„±ì í•¨ìˆ˜ì— ì˜í•´ ìƒì„±ëœ ê°ì²´

```javascript
// String ìƒì„±ì í•¨ìˆ˜ì— ì˜í•œ String ê°ì²´ ìƒì„±
const strObj = new String("Lee");
console.log(typeof strObj); // object
console.log(strObj); // String {"Lee"}

// Number ìƒì„±ì í•¨ìˆ˜ì— ì˜í•œ Number ê°ì²´ ìƒì„±
const numObj = new Number(123);
console.log(typeof numObj); // object
console.log(numObj); // Number {123}

// Boolean ìƒì„±ì í•¨ìˆ˜ì— ì˜í•œ Boolean ê°ì²´ ìƒì„±
const boolObj = new Boolean(true);
console.log(typeof boolObj); // object
console.log(boolObj); // Boolean {true}

// Function ìƒì„±ì í•¨ìˆ˜ì— ì˜í•œ Function ê°ì²´(í•¨ìˆ˜) ìƒì„±
const func = new Function("x", "return x * x");
console.log(typeof func); // function
console.dir(func); // Æ’ anonymous(x)

// Array ìƒì„±ì í•¨ìˆ˜ì— ì˜í•œ Array ê°ì²´(ë°°ì—´) ìƒì„±
const arr = new Array(1, 2, 3);
console.log(typeof arr); // object
console.log(arr); // [1, 2, 3]

// RegExp ìƒì„±ì í•¨ìˆ˜ì— ì˜í•œ RegExp ê°ì²´(ì •ê·œ í‘œí˜„ì‹) ìƒì„±
const regExp = new RegExp(/ab+c/i);
console.log(typeof regExp); // object
console.log(regExp); // /ab+c/i

// Date ìƒì„±ì í•¨ìˆ˜ì— ì˜í•œ Date ê°ì²´ ìƒì„±
const date = new Date();
console.log(typeof date); // object
console.log(date); // Mon May 04 2020 08:36:33 GMT+0900 (ëŒ€í•œë¯¼êµ­ í‘œì¤€ì‹œ)
```

Object ìƒì„±ì í•¨ìˆ˜ë³´ë‹¤ `ê°ì²´ ë¦¬í„°ëŸ´`ì„ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ë” `ê°„í¸`í•œë‹¤.

## 2. ìƒì„±ì í•¨ìˆ˜

### 2-1. ê°ì²´ ë¦¬í„°ëŸ´ì— ì˜í•œ ê°ì²´ ìƒì„± ë°©ì‹ì˜ ë¬¸ì œì 

ìƒì„±ìí•¨ìˆ˜ë³´ë‹¤ ê°ì²´ ë¦¬í„°ëŸ´ì„ ì„ í˜¸í•œë‹¤ëŠ”ë° ì™œ ì•ˆ ì“¸ê¹Œ?
ê°ì²´ ë¦¬í„°ëŸ´ì— ì˜í•œ ê°ì²´ ìƒì„± ë°©ì‹ì€ ì§ê´€ì ì´ê³  ê°„í¸í•˜ë‹¤.
í•˜ì§€ë§Œ `ë‹¨ í•˜ë‚˜ì˜ ê°ì²´ë§Œ ìƒì„±`í•  ìˆ˜ ìˆë‹¤.
ë”°ë¼ì„œ `ë™ì¼í•œ í”„ë¡œí¼í‹°ë¥¼ ê°–ëŠ” ê°ì²´ë¥¼ ì—¬ëŸ¬ê°œ ìƒì„±í•´ì•¼ í•˜ëŠ” ê²½ìš°` ê°ì²´ ë¦¬í„°ëŸ´ë¡œ ìƒì„±í•˜ëŠ” ë°©ì‹ì€ ë¹„íš¨ìœ¨ ì ì´ë‹¤.

```javascript
const circle1 = {
  radius: 5,
  getDiameter() {
    return 2 * this.radius;
  },
};

console.log(circle1.getDiameter()); // 10

const circle2 = {
  radius: 10,
  getDiameter() {
    return 2 * this.radius;
  },
};

console.log(circle2.getDiameter()); // 20
```

### 2-2. ìƒì„±ì í•¨ìˆ˜ì— ì˜í•œ ê°ì²´ ìƒì„± ë°©ì‹ì˜ ì¥ì 

ê°ì²´(ì¸ìŠ¤í„´ìŠ¤)ë¥¼ ìƒì„±í•˜ê¸° ìœ„í•œ í…œí”Œë¦¿(í´ë˜ìŠ¤)ì²˜ëŸ¼ ìƒì„±ì í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì—¬ í”„ë¡œí¼í‹° êµ¬ì¡°ê°€ ë™ì¼í•œ ê°ì²´ ì—¬ëŸ¬ê°œë¥¼ ê°„í¸í•˜ê²Œ ìƒì„±í•  ìˆ˜ ìˆë‹¤.

```javascript
// ìƒì„±ì í•¨ìˆ˜
function Circle(radius) {
  // ìƒì„±ì í•¨ìˆ˜ ë‚´ë¶€ì˜ thisëŠ” ìƒì„±ì í•¨ìˆ˜ê°€ ìƒì„±í•  ì¸ìŠ¤í„´ìŠ¤ë¥¼ ê°€ë¦¬í‚¨ë‹¤.
  this.radius = radius;
  this.getDiameter = function () {
    return 2 * this.radius;
  };
}

// ì¸ìŠ¤í„´ìŠ¤ì˜ ìƒì„±
const circle1 = new Circle(5); // ë°˜ì§€ë¦„ì´ 5ì¸ Circle ê°ì²´ë¥¼ ìƒì„±
const circle2 = new Circle(10); // ë°˜ì§€ë¦„ì´ 10ì¸ Circle ê°ì²´ë¥¼ ìƒì„±

console.log(circle1.getDiameter()); // 10
console.log(circle2.getDiameter()); // 20
```

> ğŸ’¡this
> thisëŠ” ê°ì²´ ìì‹ ì˜ í”„ë¡œí¼í‹°ë‚˜ ë©”ì„œë“œë¥¼ ì°¸ì¡°í•˜ê¸° ìœ„í•œ ìê¸° ì°¸ì¡° ë³€ìˆ˜(self-referencing variable)ë‹¤. thisê°€ ê°€ë¦¬í‚¤ëŠ” ê°’, ì¦‰ thisë°”ì¸ë”©ì€ í•¨ìˆ˜ í˜¸ì¶œ ë°©ì‹ì— ë”°ë¼ ë™ì ìœ¼ë¡œ ê²°ì •ëœë‹¤.
> |í•¨ìˆ˜ í˜¸ì¶œ ë°©ì‹ |thisê°€ ê°€ë¦¬í‚¤ëŠ” ê°’(this ë°”ì¸ë”©)|
> | ---- | ---- |
> |ì¼ë°˜ í•¨ìˆ˜ë¡œì„œ í˜¸ì¶œ| ì „ì—­ ê°ì²´|
> |ë©”ì„œë“œë¡œì„œ í˜¸ì¶œ|ë©”ì„œë“œë¥¼ í˜¸ì¶œí•œ ê°ì²´(ë§ˆì¹¨í‘œ ì•ì˜ ê°ì²´)|
> |ìƒì„±ì í•¨ìˆ˜ë¡œì„œ í˜¸ì¶œ|ìƒì„±ì í•¨ìˆ˜ê°€ ìƒì„±í•  ì¸ìŠ¤í„´ìŠ¤|

```javascript
// í•¨ìˆ˜ëŠ” ë‹¤ì–‘í•œ ë°©ì‹ìœ¼ë¡œ í˜¸ì¶œë  ìˆ˜ ìˆë‹¤.
function foo() {
  console.log(this);
}

// ì¼ë°˜ì ì¸ í•¨ìˆ˜ë¡œì„œ í˜¸ì¶œ
// ì „ì—­ ê°ì²´ëŠ” ë¸Œë¼ìš°ì € í™˜ê²½ì—ì„œëŠ” window, Node.js í™˜ê²½ì—ì„œëŠ” globalì„ ê°€ë¦¬í‚¨ë‹¤.
foo(); // window

// ë©”ì„œë“œë¡œì„œ í˜¸ì¶œ
const obj = { foo }; // ES6 í”„ë¡œí¼í‹° ì¶•ì•½ í‘œí˜„
obj.foo(); // obj => {foo: f}

// ìƒì„±ì í•¨ìˆ˜ë¡œì„œ í˜¸ì¶œ
const inst = new foo(); // inst => foo {}
```

ìƒì„±ì í•¨ìˆ˜ëŠ” `ê°ì²´ë¥¼ ìƒì„±`í•˜ëŠ” í•¨ìˆ˜ë‹¤. í•˜ì§€ë§Œ javaì™€ ê°™ì€ í´ë˜ìŠ¤ ê¸°ë°˜ ê°ì²´ì§€í–¥ ì–¸ì–´ì˜ ìƒì„±ìì™€ëŠ” ë‹¤ë¥´ê²Œ ê·¸ í˜•ì‹ì´ ì •í•´ì ¸ ìˆëŠ” ê²ƒì´ ì•„ë‹ˆë¼ `ì¼ë°˜ í•¨ìˆ˜ì™€ ë™ì¼í•œ ë°©ë²•`ìœ¼ë¡œ ìƒì„±ì í•¨ìˆ˜ë¥¼ ì •ì˜í•˜ê³  `newì—°ì‚°ì`ì™€ í•¨ê»˜ í˜¸ì¶œí•˜ë©´ í•´ë‹¹ í•¨ìˆ˜ëŠ” `ìƒì„±ì í•¨ìˆ˜ë¡œ ë™ì‘`í•œë‹¤.

```javascript
// ìƒì„±ì í•¨ìˆ˜
function Circle(radius) {
  // ìƒì„±ì í•¨ìˆ˜ ë‚´ë¶€ì˜ thisëŠ” ìƒì„±ì í•¨ìˆ˜ê°€ ìƒì„±í•  ì¸ìŠ¤í„´ìŠ¤ë¥¼ ê°€ë¦¬í‚¨ë‹¤.
  this.radius = radius;
  this.getDiameter = function () {
    return 2 * this.radius;
  };
}
// new ì—°ì‚°ìì™€ í•¨ê»˜ í˜¸ì¶œí•˜ì§€ ì•Šìœ¼ë©´ ìƒì„±ì í•¨ìˆ˜ë¡œ ë™ì‘í•˜ì§€ ì•ŠëŠ”ë‹¤.
// ì¦‰, ì¼ë°˜ í•¨ìˆ˜ë¡œì„œ í˜¸ì¶œëœë‹¤.
const circle3 = Circle(15);

// ì¼ë°˜ í•¨ìˆ˜ë¡œì„œ í˜¸ì¶œëœ Circleì€ ë°˜í™˜ë¬¸ì´ ì—†ìœ¼ë¯€ë¡œ ì•”ë¬µì ìœ¼ë¡œ undefinedë¥¼ ë°˜í™˜í•œë‹¤.
console.log(circle3); // undefined

// ì¼ë°˜ í•¨ìˆ˜ë¡œì„œ í˜¸ì¶œëœ Circleë‚´ì˜ thisëŠ” ì „ì—­ ê°ì²´ë¥¼ ê°€ë¦¬í‚¨ë‹¤.
console.log(radius); // 15
```

### 2-3. ìƒì„±ì í•¨ìˆ˜ì˜ ì¸ìŠ¤í„´ìŠ¤ ìƒì„± ê³¼ì •

> ìƒì„±ì í•¨ìˆ˜ì˜ ì—­í• 
>
> - ì¸ìŠ¤í„´ìŠ¤ ìƒì„±
> - ìƒì„±ëœ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì´ˆê¸°í™”(ì¸ìŠ¤í„´ìŠ¤ í”„ë¡œí¼í‹° ì¶”ê°€ ë° ì´ˆê¸°ê°’ í• ë‹¹)

ìƒì„±ì í•¨ìˆ˜ì— returnì´ ì—†ì–´ë„ ìë°”ìŠ¤í¬ë¦½íŠ¸ ì—”ì§„ì€ ì•”ë¬µì ì¸ ì²˜ë¦¬ë¥¼ í†µí•´ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•˜ê³  ë°˜í™˜í•œë‹¤.

#### 2-3-1. ì¸ìŠ¤í„´ìŠ¤ ìƒì„±ê³¼ this ë°”ì¸ë”©

- ì•”ë¬µì ìœ¼ë¡œ `ë¹ˆ ê°ì²´` ìƒì„±
- ë¹ˆ ê°ì²´, ì¦‰ ì¸ìŠ¤í„´ìŠ¤ëŠ” `thisì— ë°”ì¸ë”©`ëœë‹¤.
- ì´ ì²˜ë¦¬ëŠ” í•¨ìˆ˜ ëª¸ì²´ì˜ ì½”ë“œê°€ í•œ ì¤„ì”© ì‹¤í–‰ë˜ëŠ” `ëŸ°íƒ€ì„ ì´ì „`ì— ì‹¤í–‰ëœë‹¤.

```javascript
function Circle(radius) {
  // 1. ì•”ë¬µì ìœ¼ë¡œ ë¹ˆ ê°ì²´ê°€ ìƒì„±ë˜ê³  thisì— ë°”ì¸ë”©ëœë‹¤.
  console.log(this); // Circle {}

  this.radius = radius;
  this.getDiameter = function () {
    return 2 * this.radius;
  };
}
```

#### 2-3-2. ì¸ìŠ¤í„´ìŠ¤ ì´ˆê¸°í™”

- ìƒì„±ì í•¨ìˆ˜ì— ê¸°ìˆ ë˜ì–´ ìˆëŠ” ì½”ë“œê°€ ì‹¤í–‰ë˜ì–´ `thisì— ë°”ì¸ë”©ë˜ì–´ ìˆëŠ” ì¸ìŠ¤í„´ìŠ¤`ì— `í”„ë¡œí¼í‹°`ë‚˜ `ë©”ì„œë“œ`ë¥¼ ì¶”ê°€í•œë‹¤.
- ìƒì„±ì í•¨ìˆ˜ê°€ `ì¸ìˆ˜`ë¡œ ì „ë‹¬ë°›ì€ ì´ˆê¸°ê°’ì„ ì¸ìŠ¤í„´ìŠ¤ `í”„ë¡œí¼í‹°ì— í• ë‹¹`í•˜ì—¬ `ì´ˆê¸°í™”`í•˜ê±°ë‚˜ `ê³ ì •ê°’ì„ í• ë‹¹`í•œë‹¤.
- ì´ ì²˜ë¦¬ëŠ” `ê°œë°œì`ê°€ í•œë‹¤.

```javascript
function Circle(radius) {
  // 1. ì•”ë¬µì ìœ¼ë¡œ ì¸ìŠ¤í„´ìŠ¤ê°€ ìƒì„±ë˜ê³  thisì— ë°”ì¸ë”©ëœë‹¤.

  // 2. thisì— ë°”ì¸ë”©ë˜ì–´ ìˆëŠ” ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì´ˆê¸°í™”í•œë‹¤.
  this.radius = radius;
  this.getDiameter = function () {
    return 2 * this.radius;
  };
}
```

#### 2-3-3. ì¸ìŠ¤í„´ìŠ¤ ë°˜í™˜

- ìƒì„±ì í•¨ìˆ˜ ë‚´ë¶€ì˜ ëª¨ë“  ì²˜ë¦¬ê°€ ëë‚˜ë©´ ì™„ì„±ëœ ì¸ìŠ¤í„´ìŠ¤ê°€ ë°”ì¸ë”©ëœ thisê°€ `ì•”ë¬µì ìœ¼ë¡œ ë°˜í™˜`ëœë‹¤.

```javascript
function Circle(radius) {
  // 1. ì•”ë¬µì ìœ¼ë¡œ ì¸ìŠ¤í„´ìŠ¤ê°€ ìƒì„±ë˜ê³  thisì— ë°”ì¸ë”©ëœë‹¤.

  // 2. thisì— ë°”ì¸ë”©ë˜ì–´ ìˆëŠ” ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì´ˆê¸°í™”í•œë‹¤.
  this.radius = radius;
  this.getDiameter = function () {
    return 2 * this.radius;
  };

  // 3. ì™„ì„±ëœ ì¸ìŠ¤í„´ìŠ¤ê°€ ë°”ì¸ë”©ëœ thisê°€ ì•”ë¬µì ìœ¼ë¡œ ë°˜í™˜ëœë‹¤
}

// ì¸ìŠ¤í„´ìŠ¤ ìƒì„±. Circle ìƒì„±ì í•¨ìˆ˜ëŠ” ì•”ë¬µì ìœ¼ë¡œ thisë¥¼ ë°˜í™˜í•œë‹¤.
const circle = new Circle(1);
console.log(circle); // Circle {radius: 1, getDiameter: Æ’}
```

ë§Œì•½ thisê°€ ì•„ë‹Œ `ë‹¤ë¥¸ ê°ì²´ë¥¼ ëª…ì‹œì `ìœ¼ë¡œ ë°˜í™˜í•˜ë©´ thisê°€ ë°˜í™˜ë˜ì§€ ëª»í•˜ê³  `returnë¬¸ì— ëª…ì‹œí•œ ê°ì²´`ê°€ ë°˜í™˜ëœë‹¤.

```javascript
function Circle(radius) {
  // 1. ì•”ë¬µì ìœ¼ë¡œ ì¸ìŠ¤í„´ìŠ¤ê°€ ìƒì„±ë˜ê³  thisì— ë°”ì¸ë”©ëœë‹¤.

  // 2. thisì— ë°”ì¸ë”©ë˜ì–´ ìˆëŠ” ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì´ˆê¸°í™”í•œë‹¤.
  this.radius = radius;
  this.getDiameter = function () {
    return 2 * this.radius;
  };

  // 3. ì•”ë¬µì ìœ¼ë¡œ thisë¥¼ ë°˜í™˜í•œë‹¤.
  // ëª…ì‹œì ìœ¼ë¡œ ê°ì²´ë¥¼ ë°˜í™˜í•˜ë©´ ì•”ë¬µì ì¸ this ë°˜í™˜ì´ ë¬´ì‹œëœë‹¤.
  return {};
}

// ì¸ìŠ¤í„´ìŠ¤ ìƒì„±. Circle ìƒì„±ì í•¨ìˆ˜ëŠ” ëª…ì‹œì ìœ¼ë¡œ ë°˜í™˜í•œ ê°ì²´ë¥¼ ë°˜í™˜í•œë‹¤.
const circle = new Circle(1);
console.log(circle); // {}
```

return { };ìœ¼ë¡œ ì¸í•´ `ë‹¤ë¥¸ ê°ì²´`ê°€ ë°˜í™˜ëœë‹¤.

í•˜ì§€ë§Œ ëª…ì‹œì ìœ¼ë¡œ `ì›ì‹œ ê°’`ì„ ë°˜í™˜í•˜ë©´ ì›ì‹œ ê°’ ë°˜í™˜ì€ ë¬´ì‹œë˜ê³  `ì•”ë¬µì ìœ¼ë¡œ this`ê°€ ë°˜í™˜ëœë‹¤.

```javascript
function Circle(radius) {
  // 1. ì•”ë¬µì ìœ¼ë¡œ ì¸ìŠ¤í„´ìŠ¤ê°€ ìƒì„±ë˜ê³  thisì— ë°”ì¸ë”©ëœë‹¤.

  // 2. thisì— ë°”ì¸ë”©ë˜ì–´ ìˆëŠ” ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì´ˆê¸°í™”í•œë‹¤.
  this.radius = radius;
  this.getDiameter = function () {
    return 2 * this.radius;
  };

  // 3. ì•”ë¬µì ìœ¼ë¡œ thisë¥¼ ë°˜í™˜í•œë‹¤.
  // ëª…ì‹œì ìœ¼ë¡œ ì›ì‹œê°’ì„ ë°˜í™˜í•˜ë©´ ì›ì‹œê°’ ë°˜í™˜ì€ ë¬´ì‹œë˜ê³  ì•”ë¬µì ìœ¼ë¡œ thisê°€ ë°˜í™˜ëœë‹¤.
  return 100;
}

// ì¸ìŠ¤í„´ìŠ¤ ìƒì„±. Circle ìƒì„±ì í•¨ìˆ˜ëŠ” ëª…ì‹œì ìœ¼ë¡œ ë°˜í™˜í•œ ê°ì²´ë¥¼ ë°˜í™˜í•œë‹¤.
const circle = new Circle(1);
console.log(circle); // Circle {radius: 1, getDiameter: Æ’}
```

return 100;ì´ ìˆì–´ë„ ì›ì‹œê°’ì´ë¼ ë¬´ì‹œë˜ê³  `thisê°ì²´`ê°€ ë¦¬í„´ëœë‹¤.
ìƒì„±ì í•¨ìˆ˜ ë‚´ë¶€ì—ì„œ ëª…ì‹œì ìœ¼ë¡œ thisê°€ ì•„ë‹Œ ë‹¤ë¥¸ ê°’ì„ ë°˜í™˜í•˜ëŠ” ê²ƒì€ ìƒì„±ì í•¨ìˆ˜ì˜ ê¸°ë³¸ ë™ì‘ì„ í›¼ì†í•œë‹¤. ë”°ë¼ì„œ ìƒì„±ì í•¨ìˆ˜ ë‚´ë¶€ì—ì„œ return ë¬¸ì„ ë°˜ë“œì‹œ `ìƒëµ`í•´ì•¼ í•œë‹¤.

## 2-4. ë‚´ë¶€ ë©”ì„œë“œ `[[call]]` ê³¼ `[[Construct]]`

í•¨ìˆ˜ëŠ” `ì¼ë°˜í•¨ìˆ˜`ë¡œë„ `ìƒì„±ì í•¨ìˆ˜`ë¡œë„ í˜¸ì¶œí•  ìˆ˜ ìˆë‹¤.
í•¨ìˆ˜ëŠ” ê°ì²´ì´ë¯€ë¡œ ì¼ë°˜ê°ì²´ì™€ ë™ì¼í•˜ê²Œ ë™ì‘í•  ìˆ˜ ìˆë‹¤. í•¨ìˆ˜ ê°ì²´ëŠ” `ì¼ë°˜ ê°ì²´`ê°€ ê°€ì§€ê³  ìˆëŠ” `ë‚´ë¶€ ìŠ¬ë¡¯`ê³¼ `ë‚´ë¶€ ë©”ì„œë“œ`ë¥¼ ëª¨ë‘ ê°€ì§€ê³  ìˆê¸° ë•Œë¬¸ì´ë‹¤

```javascript
// í•¨ìˆ˜ëŠ” ê°ì²´ë‹¤.
function foo() {}

// í•¨ìˆ˜ëŠ” ê°ì²´ì´ë¯€ë¡œ í”„ë¡œí¼í‹°ë¥¼ ì†Œìœ í•  ìˆ˜ ìˆë‹¤.
foo.prop = 10;

// í•¨ìˆ˜ëŠ” ê°ì²´ì´ë¯€ë¡œ ë©”ì„œë“œë¥¼ ì†Œìœ í•  ìˆ˜ ìˆë‹¤.
foo.method = function () {
  console.log(this.prop);
};

foo.method(); // 10
```

í•¨ìˆ˜ëŠ” ê°ì²´ì´ì§€ë§Œ ì¼ë°˜ ê°ì²´ì™€ëŠ” ë‹¤ë¥´ë‹¤.
`ì¼ë°˜ ê°ì²´ëŠ” í˜¸ì¶œí•  ìˆ˜ ì—†ì§€ë§Œ í•¨ìˆ˜ëŠ” í˜¸ì¶œí•  ìˆ˜ ìˆë‹¤.`

í•¨ìˆ˜ê°€ ì¼ë°˜ í•¨ìˆ˜ë¡œì„œ í˜¸ì¶œë˜ë©´ `[[Call]]`ì´ í˜¸ì¶œë˜ê³ , newì—°ì‚°ìì™€ í•¨ê»˜ ìƒì„±ì í•¨ìˆ˜ë¡œì„œ í˜¸ì¶œë˜ë©´ `[[Construct]]`ê°€ í˜¸ì¶œëœë‹¤.

```javascript
function foo() {}

// ì¼ë°˜ì ì¸ í•¨ìˆ˜ë¡œì„œ í˜¸ì¶œ: [[Call]]ì´ í˜¸ì¶œëœë‹¤.
foo();

// ìƒì„±ì í•¨ìˆ˜ë¡œì„œ í˜¸ì¶œ: [[Construct]]ê°€ í˜¸ì¶œëœë‹¤.
new foo();
```

| ë‚´ë¶€ ë©”ì„œë“œ       | í•¨ìˆ˜ ê°ì²´       |
| ----------------- | --------------- |
| `[[Call]]` O      | callable        |
| `[[Construct]]` O | constructor     |
| `[[Construct]]` X | non-constructor |

`í•¨ìˆ˜ ê°ì²´`ëŠ” ë°˜ë“œì‹œ `callable`ì´ì–´ì•¼ í•œë‹¤. ë”°ë¼ì„œ ëª¨ë“  í•¨ìˆ˜ ê°ì²´ëŠ” ë‚´ë¶€ ë©”ì„œë“œ `[[Call]]`ì„ ê°–ê³  ìˆìœ¼ë¯€ë¡œ í˜¸ì¶œí•  ìˆ˜ ìˆë‹¤.
í•˜ì§€ë§Œ ëª¨ë“  í•¨ìˆ˜ ê°ì²´ê°€ `[[Construct]]`ë¥¼ ê°–ëŠ” ê²ƒì€ ì•„ë‹ˆë‹¤. í•¨ìˆ˜ ê°ì²´ëŠ” `constructor`ì¼ ìˆ˜ë„ ìˆê³  `non-constructor`ì¼ ìˆ˜ë„ ìˆë‹¤.

- ê²°ë¡ : í•¨ìˆ˜ ê°ì²´ëŠ” callableì´ë©´ì„œ constructorì´ê±°ë‚˜ callableì´ë©´ì„œ non-constructorë‹¤. ì¦‰, ëª¨ë“  í•¨ìˆ˜ ê°ì²´ëŠ” í˜¸ì¶œí•  ìˆ˜ ìˆì§€ë§Œ ëª¨ë“  í•¨ìˆ˜ ê°ì²´ë¥¼ ìƒì„±ì í•¨ìˆ˜ë¡œì„œ í˜¸ì¶œí•  ìˆ˜ ìˆëŠ” ê²ƒì€ ì•„ë‹ˆë‹¤.

## 2-5.constructorì™€ non-constructorì˜ êµ¬ë¶„

`non-constructor`ëŠ” `[[Construct]] ë‚´ë¶€ ë©”ì„œë“œê°€ ì—†ëŠ” í•¨ìˆ˜ ê°ì²´` ì¦‰, `newì—°ì‚°ìì™€ í•¨ê»˜ ìƒì„±ì í•¨ìˆ˜ë¡œ í˜¸ì¶œí•  ìˆ˜ ì—†ëŠ”` í•¨ìˆ˜ ê°ì²´ì´ë‹¤.

| êµ¬ë¶„            | ì˜ˆ                                              |
| --------------- | ----------------------------------------------- |
| constructor     | í•¨ìˆ˜ ì„ ì–¸ë¬¸, í•¨ìˆ˜ í‘œí˜„ì‹, í´ë˜ìŠ¤(í´ë˜ìŠ¤ë„ í•¨ìˆ˜) |
| non-constructor | ë©”ì„œë“œ(ES6 ë©”ì„œë“œ ì¶•ì•½ í‘œí˜„), í™”ì‚´í‘œ í•¨ìˆ˜       |

```javascript
// ì¼ë°˜ í•¨ìˆ˜ ì •ì˜: í•¨ìˆ˜ ì„ ì–¸ë¬¸, í•¨ìˆ˜ í‘œí˜„ì‹
function foo() {}
const bar = function () {};
// í”„ë¡œí¼í‹° xì˜ ê°’ìœ¼ë¡œ í• ë‹¹ëœ ê²ƒì€ ì¼ë°˜ í•¨ìˆ˜ë¡œ ì •ì˜ëœ í•¨ìˆ˜ë‹¤. ì´ëŠ” ë©”ì„œë“œë¡œ ì¸ì •í•˜ì§€ ì•ŠëŠ”ë‹¤.
const baz = {
  x: function () {},
};

// ì¼ë°˜ í•¨ìˆ˜ë¡œ ì •ì˜ëœ í•¨ìˆ˜ë§Œì´ constructorì´ë‹¤.
new foo(); // -> foo {}
new bar(); // -> bar {}
new baz.x(); // -> x {}

// í™”ì‚´í‘œ í•¨ìˆ˜ ì •ì˜
const arrow = () => {};

new arrow(); // TypeError: arrow is not a constructor

// ë©”ì„œë“œ ì •ì˜: ES6ì˜ ë©”ì„œë“œ ì¶•ì•½ í‘œí˜„ë§Œì„ ë©”ì„œë“œë¡œ ì¸ì •í•œë‹¤.
const obj = {
  x() {},
};

new obj.x(); // TypeError: obj.x is not a constructor
```

## 2-6. new ì—°ì‚°ì

- newì—°ì‚°ìê°€ ìˆìœ¼ë©´ ìƒì„±ì í•¨ìˆ˜ì´ê³  ì—†ìœ¼ë©´ ì¼ë°˜ í•¨ìˆ˜
- í•¨ìˆ˜ ê°ì²´ì˜ ë‚´ë¶€ ë©”ì„œë“œ `[[Call]]`ì´ í˜¸ì¶œë˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ `[[Construct]]`ê°€ í˜¸ì¶œëœë‹¤. ë‹¨ í•¨ìˆ˜ëŠ” constructorì´ì–´ì•¼ í•œë‹¤. non-constructorëŠ” ì•ˆ ëœë‹¤.

```javascript
// ìƒì„±ì í•¨ìˆ˜ë¡œì„œ ì •ì˜í•˜ì§€ ì•Šì€ ì¼ë°˜ í•¨ìˆ˜
function add(x, y) {
  return x + y;
}

// ìƒì„±ì í•¨ìˆ˜ë¡œì„œ ì •ì˜í•˜ì§€ ì•Šì€ ì¼ë°˜ í•¨ìˆ˜ë¥¼ new ì—°ì‚°ìì™€ í•¨ê»˜ í˜¸ì¶œ
let inst = new add();
// í•¨ìˆ˜ê°€ ê°ì²´ë¥¼ ë°˜í™˜í•˜ì§€ ì•Šì•˜ìœ¼ë¯€ë¡œ ë°˜í™˜ë¬¸ì´ ë¬´ì‹œëœë‹¤. ë”°ë¼ì„œ ë¹ˆ ê°ì²´ê°€ ìƒì„±ë˜ì–´ ë°˜í™˜ëœë‹¤.
console.log(inst); // {}

// ê°ì²´ë¥¼ ë°˜í™˜í•˜ëŠ” ì¼ë°˜ í•¨ìˆ˜
function createUser(name, role) {
  return { name, role };
}

// ìƒì„±ì í•¨ìˆ˜ë¡œì„œ ì •ì˜í•˜ì§€ ì•Šì€ ì¼ë°˜ í•¨ìˆ˜ë¥¼ new ì—°ì‚°ìì™€ í•¨ê»˜ í˜¸ì¶œ
inst = new createUser("Lee", "admin");
// í•¨ìˆ˜ê°€ ìƒì„±í•œ ê°ì²´ë¥¼ ë°˜í™˜í•œë‹¤.
console.log(inst); // {name: "Lee", role: "admin"}
```

ë°˜ëŒ€ë¡œ newì—°ì‚°ì ì—†ì´ í˜¸ì¶œí•˜ë©´ `ì¼ë°˜ í•¨ìˆ˜`ë¡œ í˜¸ì¶œëœë‹¤.

```javascript
// ìƒì„±ì í•¨ìˆ˜
function Circle(radius) {
  this.radius = radius;
  this.getDiameter = function () {
    return 2 * this.radius;
  };
}

// new ì—°ì‚°ì ì—†ì´ ìƒì„±ì í•¨ìˆ˜ í˜¸ì¶œí•˜ë©´ ì¼ë°˜ í•¨ìˆ˜ë¡œì„œ í˜¸ì¶œëœë‹¤.
const circle = Circle(5);
console.log(circle); // undefined

// ì¼ë°˜ í•¨ìˆ˜ ë‚´ë¶€ì˜ thisëŠ” ì „ì—­ ê°ì²´ windowë¥¼ ê°€ë¦¬í‚¨ë‹¤.
console.log(radius); // 5
console.log(getDiameter()); // 10

circle.getDiameter();
```

Circleí•¨ìˆ˜ë¥¼ newì—°ì‚°ìì™€ í•¨ê»˜ ìƒì„±ì í•¨ìˆ˜ë¡œì„œ í˜¸ì¶œí•˜ë©´ í•¨ìˆ˜ ë‚´ë¶€ì˜ thisëŠ” Circle ì¸ìŠ¤í„´ìŠ¤ë¥¼ ê°€ë¦¬í‚¨ë‹¤.
í•˜ì§€ë§Œ Circleí•¨ìˆ˜ë¥¼ ì¼ë°˜ í•¨ìˆ˜ë¡œ í˜¸ì¶œí•˜ë©´ í•¨ìˆ˜ ë‚´ë¶€ì˜ thisëŠ” windowë¥¼ ê°€ë¦¬í‚¨ë‹¤.

## 2-7. new.target

- ES6ì—ì„œëŠ” new.targetì„ ì§€ì›í•œë‹¤. ìƒì„±ì í•¨ìˆ˜ê°€ `newì—°ì‚°ì ì—†ì´ í˜¸ì¶œë˜ëŠ” ê²ƒì„ ë°©ì§€`í•˜ê¸° ìœ„í•´ íŒŒìŠ¤ì¹¼ ì¼€ì´ìŠ¤ ì»¨ë²¤ì…˜ì„ ì‚¬ìš©í•˜ì§€ë§Œ, ê·¸ë˜ë„ ì‹¤ìˆ˜ëŠ” ë°œìƒí•  ìˆ˜ ìˆë‹¤
- new.targetì—°ì‚°ìëŠ” thisì™€ ìœ ì‚¬í•˜ê²Œ constructorì¸ ëª¨ë“  í•¨ìˆ˜ ë‚´ë¶€ì—ì„œ `ì•”ë¬µì ì¸ ì§€ì—­ë³€ìˆ˜`ì™€ ê°™ì´ ì‚¬ìš©ë˜ë©° `ë©”íƒ€ í”„ë¡œí¼í‹°`ë¼ê³  ë¶€ë¥¸ë‹¤.(IEëŠ” ì§€ì›ì•ˆí•¨)
- `newì—°ì‚°ìì™€ í•¨ê»˜` ìƒì„±ì í•¨ìˆ˜ë¡œì„œ í˜¸ì¶œë˜ë©´ í•¨ìˆ˜ ë‚´ë¶€ì˜ new.targetì€ í•¨ìˆ˜ `ìì‹ `ì„ ê°€ë¦¬í‚¨ë‹¤. `newì—°ì‚°ì ì—†ì´ ì¼ë°˜ í•¨ìˆ˜`ë¡œ í˜¸ì¶œë˜ë©´ `undefined`ë¥¼ ë°˜í™˜í•œë‹¤.

```javascript
// ìƒì„±ì í•¨ìˆ˜
function Circle(radius) {
  // ì´ í•¨ìˆ˜ê°€ new ì—°ì‚°ìì™€ í•¨ê»˜ í˜¸ì¶œë˜ì§€ ì•Šì•˜ë‹¤ë©´ new.targetì€ undefinedë‹¤.
  if (!new.target) {
    // new ì—°ì‚°ìì™€ í•¨ê»˜ ìƒì„±ì í•¨ìˆ˜ë¥¼ ì¬ê·€ í˜¸ì¶œí•˜ì—¬ ìƒì„±ëœ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë°˜í™˜í•œë‹¤.
    return new Circle(radius);
  }

  this.radius = radius;
  this.getDiameter = function () {
    return 2 * this.radius;
  };
}

// new ì—°ì‚°ì ì—†ì´ ìƒì„±ì í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ì—¬ë„ new.targetì„ í†µí•´ ìƒì„±ì í•¨ìˆ˜ë¡œì„œ í˜¸ì¶œëœë‹¤.
const circle = Circle(5);
console.log(circle.getDiameter());
```

> ğŸ’¡ìŠ¤ì½”í”„ ì„¸ì´í”„ ìƒì •ì íŒ¨í„´scope-safe constructor new.targetì„ ì‚¬ìš©í•  ìˆ˜ ì—†ëŠ” ìƒí™©ì´ë¼ë©´ ìŠ¤ì½”í”„ ì„¸ì´í”„ ìƒì„±ì íŒ¨í„´ì„ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤. instanceof ì—°ì‚°ìë¥¼ í™œìš©í•œë‹¤.

- ë¹ŒíŠ¸ì¸ ìƒì„±ì í•¨ìˆ˜ ì°¸ê³ ë¡œ ëŒ€ë¶€ë¶„ì˜ ë¹ŒíŠ¸ì¸ ìƒì„±ì í•¨ìˆ˜(Object, String, Number, Boolean, Function, Array, Date, RegExp, Promiseë“±)ëŠ” newì—°ì‚°ìì™€ í•¨ê»˜ í˜¸ì¶œë˜ì—ˆëŠ”ì§€ë¥¼ í™•ì¸í•œ í›„ ì ì ˆí•œ ê°’ì„ ë°˜í™˜í•œë‹¤.
- ì˜ˆë¥¼ë“¤ì–´ `Object`ì™€ `Functioní•¨ìˆ˜`ëŠ” `newì—°ì‚°ì ì—†ì´` í˜¸ì¶œí•´ë„ newì—°ì‚°ìì™€ í•¨ê»˜ í˜¸ì¶œí•œ ê²½ìš°ì™€ ë™ì¼í•˜ê²Œ ë™ì‘í•œë‹¤.

```javascript
let obj = new Object();
console.log(obj); // {}

obj = Object();
console.log(obj); // {}

let f = new Function("x", "return x ** x");
console.log(f); // Æ’ anonymous(x) { return x ** x }

f = Function("x", "return x ** x");
console.log(f); // Æ’ anonymous(x) { return x ** x }
```

- ë°˜ë©´ `String`, `Number`, `Boolean`ì€ `newì—°ì‚°ìì™€ í•¨ê»˜` í˜¸ì¶œí–ˆì„ ë•Œ ê°ì²´ë¥¼ ìƒì„±í•˜ì—¬ ë°˜í™˜í•˜ì§€ë§Œ, newì—°ì‚°ì ì—†ì´ í˜¸ì¶œí•˜ë©´ ë¬¸ìì—´, ìˆ«ì, ë¶ˆë¦¬ì–¸ ì›ì‹œ ê°’ì„ ë°˜í™˜í•œë‹¤.

```javascript
const str = String(123);
console.log(str, typeof str); // 123 string

const num = Number("123");
console.log(num, typeof num); // 123 number

const bool = Boolean("true");
console.log(bool, typeof bool); // true boolean
```
